# Markdown Cleaner 测试指南

## 📋 目录
1. [快速开始](#快速开始)
2. [测试方法](#测试方法)
3. [测试用例](#测试用例)
4. [验证结果](#验证结果)

## 🚀 快速开始

### 前置条件
- Node.js 已安装（v16+）
- 项目依赖已安装（`npm install`）

### 启动服务器
```bash
cd d:\workspace\content\docs\markdown-cleaner
npm start
```

服务器将在 `http://localhost:3000` 启动

## 🧪 测试方法

### 方法一：浏览器界面测试（推荐）

#### 步骤：
1. **打开浏览器**
   - 访问 `http://localhost:3000`
   - 点击"基础版（Basic）"卡片

2. **导入测试文件**
   - 方式1：点击上传区域，选择文件
   - 方式2：直接拖拽文件到上传区域
   - 方式3：在编辑器中直接粘贴文本

3. **执行测试**
   - 点击"🔎 检查与建议" - 查看检测到的问题
   - 点击"⚡ 一键修复" - 自动修复所有问题
   - 点击"⚖️ 对比" - 查看修复前后的对比
   - 点击"💾 导出文件" - 下载修复后的文件

4. **验证结果**
   - 检查编辑器中的内容是否符合预期
   - 使用对比视图查看具体变化
   - 导出文件并在其他编辑器中验证

### 方法二：命令行测试

#### 运行完整测试套件：
```bash
cd d:\workspace\content\docs\markdown-cleaner
node test.js
```

#### 测试指定文件：
```bash
node test.js test-demo.md
node test.js test-simple.md
```

#### 测试多个文件：
```bash
node test.js test-demo.md test-simple.md your-file.md
```

### 方法三：创建自己的测试文件

创建一个 `.md` 文件，包含以下测试内容：

```markdown
# 测试文档

## 标题格式测试
#这个标题没有空格
##这个也没有

## 列表格式测试
*列表项1
*列表项2
  *嵌套项

## 引号测试
他说"你好"
使用「繁体引号」和『书名号』

## 标点测试
中文句子,使用英文逗号.
中英文之间缺少空格:Hello世界

## 繁简转换测试
這是繁體字
資料庫和網路
```

然后使用浏览器或命令行测试。

## 📝 测试用例

### 1. 标题格式测试
**目的**：验证标题空格修复

**输入**：
```markdown
#标题1
##标题2
###标题3
```

**预期输出**：
```markdown
# 标题1
## 标题2
### 标题3
```

### 2. 列表格式测试
**目的**：验证列表标记统一

**输入**：
```markdown
*列表项1
+列表项2
-列表项3
```

**预期输出**：
```markdown
- 列表项 1
- 列表项 2
- 列表项 3
```

### 3. 引号统一测试
**目的**：验证引号转换为中文引号

**输入**：
```markdown
他说"你好"
使用「繁体引号」和『书名号』
```

**预期输出**：
```markdown
他说"你好"
使用"繁体引号"和"书名号"
```

### 4. 标点符号测试
**目的**：验证中英文标点转换

**输入**：
```markdown
中文句子,使用英文逗号.
这也是英文句号.
```

**预期输出**：
```markdown
中文句子，使用英文逗号。
这也是英文句号。
```

### 5. 繁简转换测试
**目的**：验证繁体字转简体

**输入**：
```markdown
這是繁體字
資料庫和網路
```

**预期输出**：
```markdown
这是繁体字
资料库和网路
```

### 6. 中英文空格测试
**目的**：验证中英文之间添加空格

**输入**：
```markdown
中英文之间缺少空格:Hello世界
```

**预期输出**：
```markdown
中英文之间缺少空格:Hello 世界
```

## ✅ 验证结果

### 检查清单

#### 标题格式
- [ ] 标题 `#` 后有空格
- [ ] 标题层级正确
- [ ] 标题前后有空行（可选）

#### 列表格式
- [ ] 列表标记统一为 `-`
- [ ] 列表项之间有适当空格
- [ ] 嵌套列表缩进正确

#### 引号格式
- [ ] 英文引号 `"` `"` 转为中文引号 `"` `"`
- [ ] 繁体引号 `「` `」` 转为中文引号
- [ ] 书名号 `『` `』` 转为中文引号

#### 标点符号
- [ ] 中文语境使用中文标点
- [ ] 英文语境使用英文标点
- [ ] 标点符号前后空格正确

#### 繁简转换
- [ ] 繁体字转为简体字
- [ ] 专有名词保留（可选）

#### 空格处理
- [ ] 中英文之间有空格
- [ ] 数字和中文之间有空格
- [ ] 多余空格已删除

### 常见问题

#### Q1: 为什么有些行被合并了？
**A**: 这是"断行合并"功能，会将段落中不应断开的行合并。如果不需要，可以在"修复选项"中取消勾选"合并断行"。

#### Q2: 为什么代码块中的内容也被修改了？
**A**: 正常情况下，代码块应该被保护。如果发现代码块内容被修改，请提交 bug。

#### Q3: 为什么繁简转换没有生效？
**A**: 
- 检查是否勾选了"繁简转换"选项
- OpenCC 库可能初始化失败，查看服务器日志

#### Q4: 为什么预览中的引号显示不正确？
**A**: 这是 Markdown 渲染器的显示问题，下载的文件中引号是正确的。

## 🎯 性能测试

### 测试大文件处理
创建一个大文件（1MB+），测试：
- 文件上传速度
- 处理时间
- 内存占用
- 是否卡顿

### 测试特殊字符
```markdown
# 特殊字符测试
[链接](https://example.com)
![图片](image.jpg)
`行内代码`
```

## 📊 测试报告模板

```markdown
## 测试报告

**测试日期**：2025-12-25
**测试人员**：你的名字
**版本**：v1.0.1

### 测试环境
- 操作系统：Windows
- 浏览器：Chrome
- Node.js版本：v18

### 测试结果

| 测试项 | 通过 | 失败 | 备注 |
|--------|------|------|------|
| 标题格式 | ✅ | | |
| 列表格式 | ✅ | | |
| 引号统一 | ✅ | | |
| 标点符号 | ✅ | | |
| 繁简转换 | ✅ | | |
| 空格处理 | ✅ | | |

### 发现的问题
1. 问题描述
   - 重现步骤
   - 预期行为
   - 实际行为

### 改进建议
1. 建议内容
```

## 🔗 相关资源

- [项目 README](README.md)
- [用户指南](USER_GUIDE.md)
- [变更日志](CHANGELOG.md)
- [架构图](docs/ARCHITECTURE_DIAGRAM.md)
