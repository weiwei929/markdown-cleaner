# MarkDown 文档整理工具 - 使用指南

## 🎯 项目目标与核心痛点

- 主要目标：替代手工修复，后续引入 AI 辅助，实现高精度、低误伤的自动化整理
- 痛点列表：
  - 导入后格式混乱：标题空格、列表缩进、代码块、空行规范
  - 标点符号错乱：中文语境英文标点、英文语境中文标点
  - 中英文空格不规范：中英文之间缺少或多余空格
  - 繁简转换：将繁体统一为简体（基于 opencc-js）
  - 断行合并：段内不应断行的内容自动合并
  - 引号统一：各类引号统一为中文双引号（保护代码片段）
- 实施策略：
  - 分级修复：SAFE（默认安全）与 SUGGESTED（需审阅）
  - 局部计划：按板块生成与应用修复计划
  - 可视对比：修复前后对比，支持行级/字词级高亮
- 下一步：引入 AI 建议与批量应用，覆盖高风险 WARNING 类项

## 🚀 快速开始

### 1. 启动应用
```bash
npm start
```
访问：`http://localhost:3000`

### 2. 处理文档
1. **上传文档**：拖拽或点击选择 `.md`、`.markdown`、`.txt` 文件
2. **选择选项**：勾选需要的处理功能
3. **一键处理**：点击"⚡ 一键修复"
4. **查看结果**：在对比视图中查看修复前后的差异
5. **手动调整**：在编辑器中进行微调（可选）
6. **下载文件**：点击"💾 下载文件"保存结果

## 📋 处理功能详解

### 🔧 格式修复
- **标题格式化**：确保 `#` 后有空格，标题前后有空行
- **列表规范化**：统一列表标记为 `-`，修复缩进为 2 空格
- **代码块整理**：规范代码块格式，确保前后有空行

### 📝 标点规范
- **智能识别**：自动检测中英文环境
- **标点统一**：中文环境使用中文标点，英文环境使用英文标点
- **空格处理**：中英文间添加适当空格，清理多余空格

### 🔤 引号统一
**支持的引号类型**：
- 英文引号：`"` `"` `"` → `"` `"`
- 繁体引号：`「` `」` → `"` `"`
- 书名号：`『` `』` → `"` `"`
- 其他引号：`‚` `„` `«` `»` → `"` `"`

**处理示例**：
```
处理前：他说"Hello"和「你好」还有『欢迎』
处理后：他说"Hello"和"你好"还有"欢迎"
```

### 🈚 繁简转换
**常见转换**：
- 資料 → 资料
- 網路 → 网络  
- 討論 → 讨论
- 問題 → 问题

## 🎯 使用技巧

### 最佳实践
1. **处理前备份**：虽然工具会保留原始内容，但建议先备份重要文档
2. **分步处理**：对于复杂文档，可以分别选择不同选项进行处理
3. **手动检查**：处理后建议在编辑器中检查关键内容
4. **对比查看**：使用对比视图确认所有修改都符合预期

### 验证结果
**引号验证**：
```javascript
// 在浏览器控制台验证引号
const content = document.getElementById('markdownEditor').value;
const quotes = [...content].filter(char => 
    [8220, 8221].includes(char.charCodeAt(0))
);
console.log('中文引号数量:', quotes.length);
```

## ⚠️ 注意事项

### 预览功能限制
- **问题**：预览中的引号可能显示为英文引号
- **原因**：Markdown 渲染器的自动转换
- **解决**：下载的文件包含正确的中文引号，可放心使用

### 文件格式支持
- **支持**：`.md`、`.markdown`、`.txt`
- **限制**：最大文件大小 10MB
- **编码**：建议使用 UTF-8 编码

### 处理范围
- **跳过**：代码块和行内代码中的内容不会被处理
- **保护**：URL 链接中的标点符号会被保护
- **智能**：根据上下文判断中英文环境

## 🔍 问题排查

### 常见问题

**Q: 为什么预览中的引号和编辑器不一致？**
A: 这是 Markdown 渲染器的已知问题，不影响实际输出。下载的文件是正确的。

**Q: 某些标点符号没有被处理？**
A: 检查是否在代码块中，或者是否包含在 URL 链接中，这些区域会被跳过处理。

**Q: 繁简转换没有生效？**  
A: 确保勾选了"繁简转换"选项，某些罕见繁体字可能需要手动调整。

**Q: 文件上传失败？**
A: 检查文件格式和大小，确保符合要求。

### 获取帮助
- 查看浏览器控制台的错误信息
- 检查服务器终端的日志输出
- 使用测试文件验证功能是否正常

## 📞 技术支持

如需技术支持或功能改进建议，请：
1. 检查 `README.md` 中的详细文档
2. 查看项目中的测试文件
3. 运行测试脚本验证功能

---

**祝你使用愉快！📝✨**